---
interface Props {
	allTags: string[];
	activeTag: string | null;
	basePath?: string;
}

const { allTags, activeTag, basePath = '/blog' } = Astro.props;
---

<aside class="tag-sidebar meta-card">
	<h3>标签</h3>
	<ul class="tag-list">
		<li>
			<a
				href={basePath}
				class:list={['tag-chip', { active: activeTag === null }]}
			>
				全部
			</a>
		</li>
		{
			allTags.map((tag) => (
				<li>
					<a href={`${basePath}?tag=${encodeURIComponent(tag)}`} class:list={['tag-chip', { active: activeTag === tag }]}>
						{tag}
					</a>
				</li>
			))
		}
	</ul>
</aside>

<style>
	.tag-sidebar h3 {
		margin: 0 0 1em 0;
		font-size: 1rem;
		font-weight: 600;
		color: rgb(var(--black));
	}
	.tag-list {
		list-style: none;
		padding: 0;
		margin: 0;
		display: flex;
		flex-direction: column;
		gap: 0.35rem;
	}
	.tag-list li {
		margin: 0;
	}
	.tag-list a {
		display: inline-block;
		text-decoration: none;
	}

	.tag-chip {
		padding: 0.35rem 0.75rem;
		border-radius: 999px;
		background: rgba(var(--accent), 0.08);
		color: rgb(var(--gray-dark));
		font-size: 0.85rem;
		transition: background-color 0.2s, color 0.2s;
	}

	.tag-chip.active {
		background: rgba(var(--accent), 0.16);
		color: rgb(var(--accent));
		font-weight: 600;
	}

	.tag-chip:hover {
		background: rgba(var(--accent), 0.22);
	}
</style>

